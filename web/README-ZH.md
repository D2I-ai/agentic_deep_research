# ğŸš€ Web å‰ç«¯å¯åŠ¨è„šæœ¬ä¸ä½¿ç”¨è¯´æ˜

ä¸€é”®æ£€æµ‹/å®‰è£… Node.jsã€è‡ªåŠ¨å®‰è£…ä¾èµ–ã€é‡Šæ”¾ç«¯å£å¹¶å¯åŠ¨ **Vite å¼€å‘æœåŠ¡å™¨** çš„ Python è„šæœ¬ã€‚

é€‚ç”¨äºï¼š
- **Linux**ï¼ˆæ”¯æŒè‡ªåŠ¨å®‰è£… Node.jsï¼‰
- **macOS**ï¼ˆå·²å®‰è£… Node.js æ—¶å¯ç”¨ï¼‰
- **Windows**ï¼ˆå·²å®‰è£… Node.js æ—¶å¯ç”¨ï¼‰

---

## âœ¨ ç‰¹æ€§

1. **è‡ªåŠ¨å®‰è£… Node.jsï¼ˆLinuxï¼‰**
   - ä¼˜å…ˆä½¿ç”¨ **nvm**ï¼ˆæ—  sudoï¼‰å®‰è£…åˆ° `~/.nvm`
   - å¿…è¦æ—¶å°è¯•ç³»ç»ŸåŒ…ç®¡ç†å™¨ï¼ˆapt / yumï¼‰
2. **è‡ªåŠ¨ä¿®æ­£ PATH**  
   ç¡®ä¿ Node/npm å¯è¢« Python å­è¿›ç¨‹è°ƒç”¨
3. **è‡ªåŠ¨å®‰è£… npm ä¾èµ–**  
   ä»…åœ¨ `package.json` æ”¹åŠ¨æˆ–é¦–æ¬¡è¿è¡Œæ—¶æ‰§è¡Œ
4. **å¯åŠ¨å‰é‡Šæ”¾ç«¯å£**  
   æŸ¥å ç”¨å¹¶æ€æ‰å¯¹åº”è¿›ç¨‹ï¼ˆlsof / fuserï¼‰
5. **å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨**
6. **Ctrl+C** å®‰å…¨é€€å‡º  
   æ€æ‰è¿›ç¨‹ç»„ï¼Œç«¯å£ç«‹å³é‡Šæ”¾

---

## ğŸ“¦ ç¯å¢ƒè¦æ±‚

- Python **3.5+**
- Node.js **>=16.20.0**  
  å»ºè®® LTS ç‰ˆæœ¬ï¼ˆ[Node ä¸‹è½½](https://nodejs.org/en/download/)ï¼‰
- npm **>=8**
- ç³»ç»Ÿå·¥å…·ï¼š
  - `curl`ï¼ˆå®‰è£… Node.js æ—¶ç”¨ï¼‰
  - `lsof` æˆ– `fuser`ï¼ˆé‡Šæ”¾ç«¯å£æ—¶ç”¨ï¼‰
  - `git`ï¼ˆä»æºç å®‰è£…åŒ…æ—¶ç”¨ï¼‰

**æŸ¥çœ‹å½“å‰ç‰ˆæœ¬**
```bash
node -v
npm -v
python --version
```

## âš¡ å¿«é€Ÿå¼€å§‹
```bash
git clone <your-repo-url>
cd your-repo/web
python run.py
```
å¯åŠ¨åä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥ Node
- è‡ªåŠ¨å®‰è£…ä¾èµ–
- å¯åŠ¨ Vite Dev Server

| å¹³å°    | è‡ªåŠ¨å®‰è£… Node.js | è‡ªåŠ¨ä¿®å¤ PATH | è‡ªåŠ¨é‡Šæ”¾ç«¯å£ | å¤‡æ³¨ |
|---------|-----------------|---------------|--------------|------|
| Linux   | âœ… æ”¯æŒï¼ˆnvm æ—  sudo / apt / yumï¼‰ | âœ… | âœ… | æ¨èå¹³å° |
| macOS   | âŒ ï¼ˆéœ€æ‰‹åŠ¨å®‰è£… Node.jsï¼‰ | âœ… | âœ… | å¯æ­£å¸¸ä½¿ç”¨å¯åŠ¨ |
| Windows | âŒ ï¼ˆéœ€æ‰‹åŠ¨å®‰è£… Node.jsï¼‰ | âŒ | âœ… |  |


## ğŸ”§ è„šæœ¬ä½¿ç”¨æ–¹æ³•
- **1. ä¿®æ”¹åç«¯æœåŠ¡URLåŠå‰ç«¯æœåŠ¡ç«¯å£å·**
ç¼–è¾‘ `.env.development`ä¿®æ”¹åç«¯æœåŠ¡åœ°å€
ç¼–è¾‘ `vite.config.ts` ä¸­çš„ `server.port`ä¿®æ”¹å‰ç«¯æœåŠ¡ç«¯å£

- **2.é»˜è®¤å¯åŠ¨** é»˜è®¤å¯åŠ¨ï¼ˆ8080 ç«¯å£æˆ–è‡ªåŠ¨åˆ†é…ç©ºé—²ç«¯å£ï¼‰
```bash
python run.py
```

- **3.æŒ‡å®šå¯åŠ¨ç«¯å£** ï¼ˆè‡ªåŠ¨é€’å¢æ‰¾ç©ºé—²ï¼‰
```bash
python run.py --port 8080
```

- **4.æŒ‡å®šç«¯å£ + ä¸¥æ ¼å›ºå®š** ï¼ˆå ç”¨æ—¶æŠ¥é”™é€€å‡ºï¼‰
```bash
python run.py --port 8080 --strict
```

- **5.è°ƒè¯•æ¨¡å¼**
```bash
python run.py --debug
```

## âš™ï¸ å¯åŠ¨è„šæœ¬æµç¨‹å›¾
è„šæœ¬ä¼šæ‰§è¡Œä»¥ä¸‹é€»è¾‘ï¼š
1. **æ£€æµ‹å¹¶å®‰è£… Node.js**  
   - ä¼˜å…ˆä½¿ç”¨ **nvmï¼ˆæ—  sudoï¼‰** å®‰è£…åˆ° `$HOME/.nvm`ï¼Œé¿å…æƒé™é”™è¯¯  
   - å¿…è¦æ—¶å°è¯•ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨ï¼ˆapt/yumï¼‰å®‰è£…
2. **è‡ªåŠ¨ä¿®æ­£ PATH**  
   - å®‰è£…å®Œæˆåæˆ–æ£€æµ‹åˆ° nvm å®‰è£…çš„ Nodeï¼Œä¼šè‡ªåŠ¨å°†å…¶åŠ å…¥åˆ°å…¨å±€ PATH
3. **å®‰è£… `@rollup/rollup-linux-x64-gnu`**ï¼ˆä»… Linux x86_64ï¼‰  
4. **è‡ªåŠ¨æ£€æŸ¥å¹¶å®‰è£… npm ä¾èµ–**
5. **å¯åŠ¨å‰é‡Šæ”¾ç«¯å£**  
   - æ£€æµ‹æŒ‡å®šç«¯å£å ç”¨æƒ…å†µï¼ˆä½¿ç”¨ `lsof`ï¼‰ï¼Œå¦‚è¢«å ä¼šæ€æ‰å ç”¨è¿›ç¨‹
6. **å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨**
7. **Ctrl+C å®Œæ•´é€€å‡º**  
   - ç»“æŸæ•´ä¸ªè¿›ç¨‹ç»„ï¼Œä¿è¯ç«¯å£ç«‹å³é‡Šæ”¾  

## ğŸ“„ é¡¹ç›®ç»“æ„
```bash
project/
â”‚
â”œâ”€â”€ run.py                   # Python å¯åŠ¨è„šæœ¬ï¼ˆè‡ªåŠ¨æ£€æµ‹/å®‰è£… Nodeã€ä¾èµ–ã€é‡Šæ”¾ç«¯å£å¹¶å¯åŠ¨å‰ç«¯æœåŠ¡ï¼‰
â”œâ”€â”€ package.json             # å‰ç«¯ä¾èµ–ä¸ npm è„šæœ¬é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite æ„å»ºå·¥å…·é…ç½®æ–‡ä»¶
â”œâ”€â”€ package-lock.json        # ä¾èµ–ç‰ˆæœ¬é”å®šæ–‡ä»¶ï¼ˆnpm è‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ public/                  # å…¬å…±é™æ€èµ„æºï¼ˆæ„å»ºæ—¶ä¼šåŸæ ·å¤åˆ¶åˆ°æœ€ç»ˆè¾“å‡ºç›®å½•ï¼‰
â”œâ”€â”€ src/                     # å‰ç«¯é¡¹ç›®æºç 
â”‚   â”œâ”€â”€ api/                 # æ¥å£é…ç½®ä¸ API è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶ï¼ˆå¯å¤ç”¨çš„ UI ç»„ä»¶ï¼‰
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooksï¼ˆReactï¼‰
â”‚   â”œâ”€â”€ locales/             # å›½é™…åŒ–è¯­è¨€é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ redux/               # Redux çŠ¶æ€ç®¡ç†ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ router/              # è·¯ç”±é…ç½®ä¸é¡µé¢å¯¼èˆª
â”‚   â”œâ”€â”€ styles/              # å…¨å±€é€šç”¨æ ·å¼ï¼ˆCSS/SCSSï¼‰
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°ä¸é€šç”¨æ–¹æ³•
â”‚   â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶ï¼ˆæŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†ï¼‰
â”‚   â”œâ”€â”€ App.tsx              # React æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx             # é¡¹ç›®å…¥å£æ–‡ä»¶ï¼ŒæŒ‚è½½ React åº”ç”¨
â”‚   â”œâ”€â”€ index.html           # HTML æ¨¡æ¿æ–‡ä»¶ï¼ˆVite ä¼šå°†è„šæœ¬æ³¨å…¥æ­¤æ¨¡æ¿ï¼‰
â”‚   â”œâ”€â”€ .env.development     # å¼€å‘ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¦‚ API è¯·æ±‚åœ°å€ï¼‰
â”‚   â”œâ”€â”€ .env.production      # ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ”§ å¼€å‘è€…å¸¸ç”¨é…ç½®

åœ¨å¼€å‘æˆ–éƒ¨ç½²å‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶çš„é…ç½®ï¼š

- **ä¿®æ”¹åç«¯ API åœ°å€**
  - **å¼€å‘ç¯å¢ƒ**ï¼šç¼–è¾‘ `.env.development`  
    ä¾‹ï¼š
    ```env
    VITE_PROXY_TARGET=http://localhost:8080   # ä½ çš„å¼€å‘ç¯å¢ƒåç«¯åœ°å€
    ```
  - **ç”Ÿäº§ç¯å¢ƒ**ï¼šç¼–è¾‘ `.env.production`  
    ä¾‹ï¼š
    ```env
    VITE_API_BASE_URL=https://api.example.com
    ```

- **ä¿®æ”¹å‰ç«¯å¯åŠ¨ç«¯å£**
  - ç¼–è¾‘ `vite.config.ts` ä¸­çš„ `server.port`  
    ä¾‹ï¼š
    ```ts
    export default defineConfig({
      server: {
        port: 8080,        // æ­¤å¤„ä¿®æ”¹ç«¯å£
        host: "0.0.0.0"
      }
    });
    ```

> ğŸ’¡ æç¤ºï¼šï¼ˆç¯å¢ƒå˜é‡ `.env.*` æ–‡ä»¶çš„ä¿®æ”¹éœ€è¦é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆï¼‰


## ğŸ›  Linux æ‰‹åŠ¨å®‰è£… Nodeï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
å¦‚æœè‡ªåŠ¨å®‰è£…å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£… Node.jsï¼ˆâ‰¥16 LTSï¼‰ï¼š
### æ–¹å¼ 1ï¼šNodeSource å®˜æ–¹è„šæœ¬
```bash
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs  # æˆ– apt install
```
### æ–¹å¼ 2ï¼šnvm å®‰è£…
```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
source ~/.bashrc
nvm install 16
nvm use 16
nvm alias default 16
```

## ğŸš€ ç›´æ¥ç”¨ç°æœ‰Nodeå¯åŠ¨ï¼ˆè·³è¿‡ run.pyï¼‰
```bash
npm install
npm install @rollup/rollup-linux-x64-gnu   # Linux x86_64 éœ€è¦
npm run dev
```

## â— å¸¸è§é—®é¢˜
Q: å¯åŠ¨æ—¶æŠ¥ node: command not found
A:
- Linuxï¼šç›´æ¥è¿è¡Œ python3 run.py è‡ªåŠ¨å®‰è£… Node
- macOS/Windowsï¼šæ‰‹åŠ¨å®‰è£… Node.js å®˜ç½‘
Q: å¯åŠ¨æ—¶ç«¯å£å ç”¨
A: è„šæœ¬ä¼šè°ƒç”¨ lsof/fuser è‡ªåŠ¨é‡Šæ”¾ï¼Œå¦‚ç³»ç»Ÿæ— è¯¥å‘½ä»¤ï¼Œè¯·å®‰è£…ï¼š
```bash
sudo apt-get install -y lsof    # Debian/Ubuntu
sudo yum install -y lsof        # CentOS/RHEL
```
Q: å¦‚ä½•åˆ‡æ¢ Node ç‰ˆæœ¬ï¼ˆnvmï¼‰
```bash
nvm install 16
nvm use 16
nvm alias default 16
```